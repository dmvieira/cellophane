{"name":"Cellophane","tagline":"A dead simple web terminal that gets all of the boilerplate out of the way and lets you do 100% of your work on the server side and in python.","body":"Overview\r\n========\r\n\r\nOften when creating web applications, the developer must work on both client and server-side code. \r\nThis tends to increase the amount of complexity and the number of context switches the developer must \r\ndeal with.\r\n\r\nOne way to reduce this complexity is to make static one end of the communications and develop all \r\nlogic on the other end. Cellophane is one attempt at implementing this paradigm, in the narrow scope \r\nof a 'web terminal' - a text input/output application that runs in the browser. Cellophane implements \r\nall of the client side code, rendering it static. This allows the developer to focus all their \r\nattention on the server side, never having to consider any code or logic on the client side.\r\n\r\nHere's a simple example, an echo server:\r\n\r\n```python\r\nimport cellophane\r\n\r\nclass Echoer(cellophane.Handler):\r\n\r\n    def on_receive(self, message):\r\n        self.writeline(message)\r\n\r\ncp = cellophane.Cellophane(Echoer)\r\ncp.go()\r\n```\r\n\r\nIf you were to run this script, Cellophane would open port 8888 on localhost and render a webpage \r\nthere with all the logic necessary for communicating back to the server via web sockets.\r\n\r\n\r\nExample: an anonymous chat server\r\n=================================\r\n\r\n```python\r\nimport cellophane\r\n\r\n# In order for clients to be able to send chat messages to everyone else, they need to \r\n# be able to access the Handler objects representing the other clients. We'll use a list\r\n# to keep track of them.\r\nclients = []\r\n\r\nclass BigTalker(cellophane.Handler):\r\n\r\n    def on_create(self):\r\n        # This is the first time we see this client, so add it to our list.\r\n        clients.append(self)\r\n\r\n    def on_destroy(self):\r\n        # The client has disconnected, so remove it from the list.\r\n        clients.remove(self)\r\n\r\n    def on_receive(self, message):\r\n        # We don't want any nefarious clients performing XSS attacks on anyone else,\r\n        # so let's escape the HTML.\r\n        message = cellophane.escape(message)\r\n        \r\n        # Echo back to the sender what they said.\r\n        self.writeline('You say, \"%s\"' % message, 'orange');\r\n        \r\n        # Send the chat message to everyone except the originator.\r\n        for client in clients:\r\n            if client is not self:\r\n                client.writeline('Someone says, \"%s\"' % message)\r\n\r\n\r\ncp = cellophane.Cellophane(BigTalker)\r\ncp.go()\r\n```\r\n\r\nInstallation\r\n============\r\n\r\nCellophane depends on [Tornado](http://www.tornadoweb.org). You can install it via pip:\r\n\r\n    $ pip install tornado\r\n    \r\nTo install cellophane, download the tarball, unpack it, and:\r\n\r\n    $ python setup.py install\r\n\r\nReference\r\n=========\r\n\r\nCellophane is primarily composed of two classes: Cellophane and Handler. The Cellophane class deals \r\nwith starting up the server, while the Handler class manages the events fired by individual clients. \r\n\r\n\r\n### class cellophane.Handler()\r\n\r\nSubclass **Handler** to manage create/receive/destroy events from clients and send messages\r\nand commands to clients.\r\n\r\n#### Methods:\r\n\r\n**on_create**()\r\n\r\n    Called whenever a client connects to the server. Override to handle this event. Typical actions taken \r\n    might be storing the new client in a list, sending an introductory message, or setting colors.\r\n\r\n**on_receive**(*message*)\r\n\r\n    Override this method to receive messages from clients.\r\n    \r\n    message: A string sent from the client.\r\n\r\n**on_destroy**()\r\n\r\n    Called whenever a client is disconnected. Override to handle this event.\r\n\r\n**destroy**()\r\n\r\n    Disconnect the client.\r\n\r\n**write**(*string*, *color*=None)\r\n\r\n    Write a string to the terminal. Newline characters, '\\n', result in a new line on the client terminal.\r\n    \r\n    string: The string to write.\r\n    \r\n    color: A string representing the color to display the text in on the client. This can be anything \r\n           the browser will understand as a color. Typical representations might be \"red\", \"#FF0000\", or \r\n           \"rgb(255,0,0)\".\r\n\r\n**writeline**(*string*, *color*=None)\r\n\r\n    The same as Handler.write(), but appends a newline to the end.\r\n\r\n**set_color**(*color*)\r\n\r\n    Sets the default text color in the output pane.\r\n\r\n    color: A string representing the color to display the text in on the client. This can be anything \r\n           the browser will understand as a color. Typical representations might be \"red\", \"#FF0000\", or \r\n           \"rgb(255,0,0)\".\r\n\r\n**set_input_color**(*color*)\r\n\r\n    Sets the default text color in the input pane.\r\n\r\n    color: A string representing the color to display the text in on the client. This can be anything \r\n           the browser will understand as a color. Typical representations might be \"red\", \"#FF0000\", or \r\n           \"rgb(255,0,0)\".\r\n\r\n**set_output_background_color**(*color*)\r\n\r\n    Sets the color of the output pane background.\r\n\r\n    color: A string representing the color to display the text in on the client. This can be anything \r\n           the browser will understand as a color. Typical representations might be \"red\", \"#FF0000\", or \r\n           \"rgb(255,0,0)\".\r\n\r\n**set_input_background_color**(*color*)\r\n\r\n    Sets the color of the input pane background.\r\n\r\n    color: A string representing the color to display the text in on the client. This can be anything \r\n           the browser will understand as a color. Typical representations might be \"red\", \"#FF0000\", or \r\n           \"rgb(255,0,0)\".\r\n\r\n**set_separator_color**(*color*)\r\n\r\n    Sets the color of the input/output sepatator line. \r\n\r\n    color: A string representing the color to display the text in on the client. This can be anything \r\n           the browser will understand as a color. Typical representations might be \"red\", \"#FF0000\", or \r\n           \"rgb(255,0,0)\".\r\n\r\n**set_password_mode**(*on*)\r\n\r\n    Makes the input field hide typed characters. Useful for authentication purposes.\r\n    \r\n    on: True to hide typed characters, False to display them.\r\n    \r\n**focus_input**()\r\n    \r\n    Focuses the input field. Use this to allow the client user to be able to type\r\n    immediately without first focusing the input field with their mouse.\r\n    \r\n**get_ip**()\r\n\r\n    Returns the client's IP address.\r\n    \r\n\r\n### class cellophane.Cellophane(client_class=Handler, hostname='localhost', port='8888', favicon_path=STATIC_PATH, title='cellophane', debug=True)\r\n\r\n    client_class: the class you have subclassed from Handler to handle your server-side logic\r\n    \r\n    hostname: this is the host name or ip address that the client will attempt to connect to via \r\n              websockets\r\n    \r\n    port: the port the webpages are served and websockets are handled on\r\n    \r\n    favicon_path: if you want to override the built in favicon, point this to the path containing \r\n                  your favicon (not at the favicon itself)\r\n    \r\n    title: the page title for the web terminal\r\n    \r\n    debug: run Tornado in debug mode to see errors on the browser and automatically restart the \r\n           server when code is changed        \r\n    \r\n#### Methods:\r\n\r\n**periodic**(*function*, *time*)\r\n    \r\n    Provides a means of running a function at a regular interval. This should be called before \r\n    starting the server with Cellophane.go().\r\n    \r\n    function: the function to execute\r\n    \r\n    time: the amount of time, in milliseconds, between executions of function\r\n        \r\n**go**()\r\n        \r\n    Starts the web server and web socket server. This function is blocking.\r\n        \r\n\r\nMiscellaneous functions\r\n=======================\r\n\r\n**cellophane.escape**(*string*)\r\n\r\n    This is Tornado's XHTML escapeing function. You might use this to try to prevent XSS attacks.\r\n\r\n\r\nFAQ\r\n===\r\n\r\n### How can I disable draft76 support?\r\n\r\nSet the value of **cellophane.allow_draft76** to **False** before starting up your server.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}